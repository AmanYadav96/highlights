<%- include('../partials/head', {titleName: "Monetisation" }) %>

    <body data-sidebar="dark" data-layout-mode="dark" data-topbar="light">

        <!-- <body data-layout="horizontal" data-topbar="colored"> -->

        <!-- Begin page -->
        <div id="layout-wrapper">

            <%- include('../partials/page_top') %>

                <!-- ========== Left Sidebar Start ========== -->
                <%- include('../partials/side_menu', {selected: 34}) %>
                    <!-- Left Sidebar End -->

                    <!-- ============================================================== -->
                    <!-- Start right Content here -->
                    <!-- ============================================================== -->
                    <div class="main-content">

                        <div class="page-content">
                            <div class="container-fluid">

                                <!-- start page title -->
                                <div class="row">
                                    <% if (user.power==0) { %>
                                        <div class="col-12">
                                            <div class="alert alert-warning" role="alert">
                                                This is a demo account. Any changes you make will not be saved.
                                            </div>
                                        </div>
                                        <% } %>
                                            <div class="col-12">
                                                <div
                                                    class="page-title-box d-flex align-items-center justify-content-between">
                                                    <h4 class="mb-0">Google Ads Settings</h4>
                                                </div>
                                            </div>
                                </div>
                                <!-- end page title -->
                                <div class="row mb-4">
                                    <div class="col-xl-6">
                                        <div class="card h-100">
                                            <div class="card-body">
                                                <div class="text-muted">
                                                    <h5 class="font-size-16">Adverts configurations</h5>
                                                    <div id="alertContainer"></div>
                                                    <div class="table-responsive mt-4">
                                                        <div class="needs-validation" novalidate>
                                                            <div>
                                                                <p class="mb-1">Google Ads enabled?</p>
                                                                <select class="form-control form-select"
                                                                    id="googleAd_enabled">
                                                                    <option value="true" <%= config.googleAdEnabled === "true" ? "selected" : "" %>>Enabled</option>
                                                                    <option value="false" <%= config.googleAdEnabled === "false" ? "selected" : "" %>>Disabled</option>
                                                                </select>
                                                            </div>
                                                            <div class="mt-4">
                                                                <p class="mb-1">Banner Ads enabled?</p>
                                                                <select class="form-control form-select"
                                                                    id="bannerAd_enabled">
                                                                    <option value="true" <%= config.googleAdEnabled === "true" ? "selected" : "" %>>Enabled</option>
                                                                    <option value="false" <%= config.googleAdEnabled === "false" ? "selected" : "" %>>Disabled</option>
                                                                </select>
                                                            </div>
                                                            <div class="mt-4">
                                                                <p class="mb-1">Ad Video Interval:</p>
                                                                <input type="text" class="form-control"
                                                                    id="adMobInterval" placeholder="Enter AdMob Interval" value="<%= config.adMobInterval %>"
                                                                    required>
                                                            </div>
                                                            <div class="mt-4">
                                                                <p class="mb-1">Banner ID (Android):</p>
                                                                <input type="text" class="form-control"
                                                                    id="admob_banner_id"
                                                                    placeholder="Enter AdMob Banner ID"
                                                                    value="<%= config.admobBannerId %>"
                                                                    required></textarea>
                                                                <div class="invalid-feedback">
                                                                    Enter the banner ID for banner placements.
                                                                </div>
                                                            </div>
                                                            <div class="mt-4">
                                                                <p class="mb-1">Banner ID (iOS):</p>
                                                                <input type="text" class="form-control"
                                                                    id="admob_banner_id_ios"
                                                                    placeholder="Enter AdMob Banner ID"
                                                                    value="<%= config.admobBannerIdIos %>"
                                                                    required></textarea>
                                                                <div class="invalid-feedback">
                                                                    Enter the banner ID for banner placements.
                                                                </div>
                                                            </div>
                                                            <div class="mt-4">
                                                                <p class="mb-1">Interstitial ID (Android):</p>
                                                                <input type="text" class="form-control"
                                                                    id="admob_interstitial_id"
                                                                    value="<%= config.admobInterId %>"
                                                                    placeholder="Enter AdMob Interstitial ID"
                                                                    required></textarea>
                                                                <div class="invalid-feedback">
                                                                    Enter the native ID for Interstitial banner
                                                                    placements.
                                                                </div>
                                                            </div>
                                                            <div class="mt-4">
                                                                <p class="mb-1">Interstitial ID (iOS):</p>
                                                                <input type="text" class="form-control"
                                                                    id="admob_interstitial_id_ios"
                                                                    value="<%= config.admobInterIdIos %>"
                                                                    placeholder="Enter AdMob Interstitial ID"
                                                                    required></textarea>
                                                                <div class="invalid-feedback">
                                                                    Enter the native ID for Interstitial banner
                                                                    placements.
                                                                </div>
                                                            </div>
                                                            <div class="mt-4">
                                                                <p class="mb-1">Rewards Ad ID (Android):</p>
                                                                <input type="text" class="form-control"
                                                                    id="admob_reward_id"
                                                                    value="<%= config.admobRewardId %>"
                                                                    placeholder="Enter AdMob Rewards Ad ID"
                                                                    required></textarea>
                                                                <div class="invalid-feedback">
                                                                    Enter the native ID for Interstitial banner
                                                                    placements.
                                                                </div>
                                                            </div>
                                                            <div class="mt-4">
                                                                <p class="mb-1">Rewards Ad ID (iOS):</p>
                                                                <input type="text" class="form-control"
                                                                    id="admob_reward_id_ios"
                                                                    value="<%= config.admobRewardIdIos %>"
                                                                    placeholder="Enter AdMob Rewards Ad ID"
                                                                    required></textarea>
                                                                <div class="invalid-feedback">
                                                                    Enter the native ID for Interstitial banner
                                                                    placements.
                                                                </div>
                                                            </div>
                                                            <div class="d-flex flex-wrap gap-3 mt-3">
                                                                <a type="submit" id="admobSave"
                                                                    class="btn btn-primary waves-effect waves-light w-md">Save</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end row -->

                            </div> <!-- container-fluid -->
                        </div>
                        <!-- end main content-->
                        <%- include('../partials/footer') %>
                    </div>
                    <!-- END layout-wrapper -->


                    <!-- Right Sidebar -->
                    <%- include('../partials/right_sidebar') %>
                        <!-- /Right-bar -->

                        <!-- Right bar overlay-->
                        <div class="rightbar-overlay"></div>

                        <!-- JAVASCRIPT -->
                        <!-- JAVASCRIPT -->
                        <script src="../assets/libs/jquery/jquery.min.js"></script>
                        <script src="../assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
                        <script src="../assets/libs/metismenu/metisMenu.min.js"></script>
                        <script src="../assets/libs/simplebar/simplebar.min.js"></script>
                        <script src="../assets/libs/node-waves/waves.min.js"></script>
                        <script src="../assets/libs/waypoints/lib/jquery.waypoints.min.js"></script>
                        <script src="../assets/libs/jquery.counterup/jquery.counterup.min.js"></script>
                        <script src="../assets/libs/apexcharts/apexcharts.min.js"></script>
                        <script src="../assets/js/search.js"></script>
                        <script src="../assets/js/pages/dashboard.init.js"></script>

                        <!-- App js -->
                        <script src="../assets/js/app.js"></script>
                        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
                            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
                            crossorigin="anonymous"></script>
                        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
                            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
                            crossorigin="anonymous"></script>
                        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
                            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
                            crossorigin="anonymous"></script>
                        <!-- App js -->
                        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                        <script src="../assets/js/search.js"></script>
                        <script src="assets/libs/parsleyjs/parsley.min.js"></script>
                        <script src="assets/js/pages/form-validation.init.js"></script>
                        <script>
                            $(document).ready(function () {
                                $('#alertContainer').empty();
                                $("#admobSave").click(function () {
                                    var googleAdEnabled = $('#googleAd_enabled').val();
                                    var bannerAdEnabled = $('#bannerAd_enabled').val();
                                    var admobBannerId = $('#admob_banner_id').val();
                                    var admobInterId = $('#admob_interstitial_id').val();
                                    var admobBannerIdIoS = $('#admob_banner_id_ios').val();
                                    var admobInterstitialIdIos = $('#admob_interstitial_id_ios').val();
                                    var admobRewardAdId = $('#admob_reward_id').val();
                                    var admobRewardAdIdIos = $('#admob_reward_id_ios').val();
                                    var adMobInterval = $('#adMobInterval').val();
                                    saveGoogleAd(googleAdEnabled, bannerAdEnabled,  admobInterId, admobBannerId, adMobInterval, admobBannerIdIoS, admobInterstitialIdIos, admobRewardAdId, admobRewardAdIdIos);
                                });
                            });
                            async function saveGoogleAd(googleAdEnabled, bannerAdEnabled, admobInterId, admobBannerId, adMobInterval, admobBannerIdIoS, admobInterstitialIdIos, admobRewardAdId, admobRewardAdIdIos) {
                                $('#alertContainer').empty();

                                $('#admobSave').addClass("disabled");
                                $('#admobSave').html('Saving');

                                $.ajax({
                                    type: "POST",
                                    url: "/admin/saveGoogleAd",
                                    data: {
                                        googleAdEnabled: googleAdEnabled,
                                        bannerAdEnabled: bannerAdEnabled,
                                        admobInterIdAndroid: admobInterId,
                                        admobBannerIdAndroid: admobBannerId,
                                        adMobInterval: adMobInterval,
                                        admobBannerIdIoS: admobBannerIdIoS,
                                        admobInterstitialIdIos: admobInterstitialIdIos,
                                        admobRewardAdId: admobRewardAdId,
                                        admobRewardAdIdiOS: admobRewardAdIdIos
                                    },
                                    success: function (res) {
                                        if (res.status === 'success') {
                                            $('#admobSave').removeClass("disabled");
                                            $('#admobSave').html('Save');

                                            $('#alertContainer').html(`
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                ${res.message}
                </div>
                `);
                                            setTimeout(function () {
                                                $('#alertContainer .alert').hide();
                                            }, 1000);
                                        }
                                    },
                                    dataType: "json",
                                });
                            }
                        </script>
    </body>

    </html>